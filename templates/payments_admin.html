{% extends "base.html" %}
{% block title %}Payments Review{% endblock %}
{% block content %}
<h1 class="text-xl font-semibold mb-4">Payments</h1>
<div class="space-y-3">
  {% for p in payments %}
  <div class="rounded-xl p-5 bg-slate-900/60 border border-slate-800 flex items-center justify-between">
    <div>
      <div class="text-slate-300">{{ p.user.username }} • {{ p.method|upper }} • {{ p.plan }} • ₹{{ p.amount }} • {{ p.currency }} • <span class="text-slate-400">{{ p.created_at.strftime("%b %d, %Y %H:%M") }}</span></div>
      <div class="text-slate-400 text-sm">Txn/Invoice: {{ p.txn_id or "—" }} • Status: <span class="font-semibold">{{ p.status }}</span></div>
    </div>
    {% if p.status == 'pending' %}
    <form method="post" class="flex gap-2">
      <input type="hidden" name="pid" value="{{ p.id }}">
      <button name="action" value="approve" class="px-3 py-1.5 rounded-lg bg-emerald-700 hover:bg-emerald-600">Approve</button>
      <button name="action" value="reject" class="px-3 py-1.5 rounded-lg bg-rose-700 hover:bg-rose-600">Reject</button>
    </form>
    {% endif %}
  </div>
  {% else %}
  <p class="text-slate-400">No payments yet.</p>
  {% endfor %}
</div>
{% endblock %}
